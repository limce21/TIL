## Azure 클라우드

---

### 클라우드 컴퓨팅

: 획기적인 기능을 더욱 빠르게 개발하고 리소스를 유동적으로 사용하는 동시에 요금을 대폭 절약할 수 있도록 인터넷을 통해 컴퓨팅 서비스를 제공

- 컴퓨팅
- 네트워킹
- 스토리지

### 공동 책임 모델

!https://learn.microsoft.com/ko-kr/azure/security/fundamentals/media/shared-responsibility/shared-responsibility.svg

- PaaS : 서비스만 쓰는 것
- SaaS : Office 365와 같은 것

### 프라이빗 클라우드

: 온 프라미스와 비슷. 회사에서만 접근하는 것

- 조직은 조직의 데이터 센터에 클라우드 환경 구축
- 서비스 운영에 대한 책임은 서비스를 제공하는 조직에 있음

### 퍼블릭 클라우드

- 클라우드 서비스 및 호스팅 공급자가 소유
- 여러 조직과 사용자에게 리소스(DB, 가상머신 등)와 서비스를 제공
- 보안 네트워크 연결을 통해 액세스(일반적으로 인터넷)

### 하이브리드 클라우드

: 퍼블릭 클라우드와 프라이빗 클라우드를 결합. 애플리케이션이 가장 적절한 위치에서 실행되도록 구성

- AAD (Azure Active Directory) : 퍼블릭 클라우드와 프라이빗 클라우드를 연결
  - 인증 권한 관리, 액세스 관리

### 클라우드 모델 비교

| 클라우드 모델   | 기능                                                        |
| --------------- | ----------------------------------------------------------- |
| 퍼블릭 클라우드 | - 조직은 사용하는 항목(리소스, 서비스)에 대해서만 비용 지불 |

- 애플리케이션을 신속하게 프로비전(서비스를 만든다.) 및 프로비전 해제 가능
- 확장시 자본 지출 없음 |
  | 프라이빗 클라우드 | - 구축 초기 및 유지 관리를 위한 하드웨어 구매 필요
- 조직이 리소스 및 보안을 모두 제어 가능
- 조직이 하드웨어 유지 관리 및 업데이트 필요 |
  | 하이브리드 클라우드 | - 조직이 애플리케이션을 실행한 위치 결정
- 최고의 유연성 제공
- 조직이 보안, 규정 준수 또는 법적 요구 사항 제어 |

### CapEX와 OpEX 비교

- CapEX (자본 지출)
  - 실제 인프라와 관련된 선불 지출
  - 시간이 지남에 따라 감소
- OpEX (운영 비용)
  - 필요에 따라 종량제로 제품 및 서비스 비용 지출
  - 즉시 청구됨

### 사용량 기반 모델

: 클라우드 서비스 공급자는 사용량 기반 모델로 운영된다. 즉, 최종 사용자는 사용하는 리소스의 비용만 지불한다.

## 클라우드 서비스 유형

---

### IaaS

: 클라우드 공급자의 서버, 가상 머신, 스토리지, 네트워크 및 운영 체제를 대여하여 종량제 IT 인프라를 구축

- 가장 유연한 클라우드 서비스
- 사용자가 애플리케이션을 위한 하드웨어를 구성 및 관리

### PaaS

: 기본 인프라 관리에 신경쓸 필요 없이 소프트웨어 애플리케이션을 빌드, 테스트 및 배포할 수 있는 환경을 제공

- 어플리케이션 개발에 중점
- 클라우드 공급자가 플랫폼 관리를 담당

### SaaS

: 사용자는 인터넷을 통해 Microsoft Office 365, 전자 메일 및 캘린더와 같은 클라우드 기반 앱에 연결하고 사용

- 종량제 가격 책정 모델
- 사용자는 구독 모델로 사용하는 소프트웨어에 대해 비용을 지불

<aside>
💡 **트래픽이 늘어나면 자동으로 서버를 늘려준다.**

</aside>

## 리소스와 리소스 그룹

---

### 리소스

: Azure 리소스 관리자가 관리하는 가상머신, 가상 네트워크, 스토리지 계정, 부하분산 장치 등을 말함

- Azure Storage, Virtual Machine 등과 같은 리소스들을 필요에 따라 그룹화
- **리소스는 반드시 리소스 그룹에 포함되어야 한다.**
  - 없으면 관리가 복잡해지고, 프로젝트가 커지면 유지보수가 힘들어진다.

### 리소스 그룹

: 프로젝트 단위나 역할 중심으로 리소스 그룹 생성

- 역할 중심의 간단한 예로 프론트엔드, 백엔드 형태로 나눈다.
- `태그`를 활용하여 애플리케이션, 환경처럼 필요한 정보나 비용 등을 태그를 이용해서 구분할 수 있다.

### 리소스와 리소스 그룹의 관계

- 리소스는 하나의 리소스 그룹에만 존재해야 한다.
- 리소스와 리소스 그룹 이름은 생성 후 변경이 불가하다.
  - 정 바꾸고 싶으면 삭제하고 다시 생성해라.
- 동일한 구독 내에서 리소스 그룹 이름은 중복 불가하다.
- 리소스 그룹과 리소스 위치(지역)은 다를 수 있다.
- 리소스 그룹의 수명이 곧 리소스의 수명이다.
- 한 리소스 그룹 내의 리소스와 다른 리소스 그룹의 리소스는 상호작용이 가능하다.
- 한 리소스 그룹의 리소스는 다른 리소스 그룹으로 선택적으로 이동이 가능하다.
  - 단, 가상머신 이동은 권장 X, 차라리 새로 만들어라.

### Azure 리소스 관리자 (ARM)

: Azure용 배포 및 관리 서비스

- Azure 계정에서 리소스를 만들고, 업데이트하고, 삭제할 수 있는 관리 계층
- 배포 이후 액세스 제어, 잠금 및 태그와 같은 관리 기능을 이용하여 리소스 보호 구성

### 리소스 공급자

: Azure 리소스를 제공하는 서비스, 리소스 공급자는 계정에 배포할 수 있는 Azure 리소스를 정의한다.

- 가상 머신을 생성하는 경우 - `Microsoft Compute`
- 스토리지 생성하는 경우 - `Microsoft Storage`
- 리소스 공급자 확인 방법 - 구독 → 리소스 공급자 선택
- AI와 같은 특수한 환경은 모듈이 기본적으로 없기에 붙여줘야 한다.

### 실습 - Azure Portal을 이용한 리소스, 리소스 그룹 관리

1. 리소스 그룹과 리소스 생성

   - 지역에는 TO가 있다. (그나마 빠른게 Korea, East US, East Japan 이고 나머지는 느리니까 참고)
   - 가용성 영역 : 백업 시스템을 두는 것. (하나의 시스템이 이상해도, 다른 영역에서 백업해서 사용 가능하도록)

   ![스크린샷 2023-07-17 오전 10.27.15.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/7b62df2b-a368-433b-8594-1adf03fbdb18/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.27.15.png)

   ![스크린샷 2023-07-17 오전 10.27.23.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1cbbb4d0-8e1d-4c67-a6c7-c9a8d2ed23ae/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.27.23.png)

   ![스크린샷 2023-07-17 오전 10.31.43.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/71e167e7-a061-488c-8871-f49856249655/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.31.43.png)

   ![스크린샷 2023-07-17 오전 10.34.16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1b54d395-79ef-45a6-928e-80184984ff85/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.34.16.png)

   ![스크린샷 2023-07-17 오전 10.35.08.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/69e11571-0f73-46f3-886c-a81741564ce4/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.35.08.png)

2. 리소스 그룹 간의 리소스 이동
   - 이동에는 시간이 꽤나 소요된다.
3. 리소스 락(lock) 테스트 (Delete lock을 걸면 리소스 그룹이 삭제 안 된다.)
   - 잠금은 삭제 / 읽기 가능하다.

## Azure PowerShell / CLI

---

### Azure PowerShell

: 명령줄 셀, 스크립팅 언어 및 구성 관리 프레임워크로 구성된 플랫폼 간 작업 자동화 솔루션

- Windows, Linux 및 macOS에서 실행 가능

### Azure CLI

: Azure 리소스를 만들고 관리하는 데 사용되는 명령도구

- 모든 Azure 서비스에서 사용할 수 있으며, Azure를 빠르게 사용할 수 있도록 지원
- Windows, Linux 및 macOS에서 실행 가능

### Azure Cloud Shell 활성화

![스크린샷 2023-07-17 오전 10.46.58.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/49e067be-3b8a-4575-bd1b-b350994bbca2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.46.58.png)

![스크린샷 2023-07-17 오전 10.48.24.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0e5bd959-31a8-4ede-9b8e-ef71661eac5c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_10.48.24.png)

⇒ 위치에 제한이 있을 수 있어서 실패할 수도 있다.

**[ 구독 검색 ]**

`az account list -o table`

- 참고) table을 붙이면 형태가 예쁘게 나온다.

![스크린샷 2023-07-17 오전 11.07.16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/838b6d9a-5f1c-4477-9999-79c4f724383c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.07.16.png)

**[ 모든 리소스 검색 ]**

`az resource list -o table`

![스크린샷 2023-07-17 오전 11.08.39.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0da6cf9b-39de-4d21-ab5f-ce68c3f8ba84/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.08.39.png)

## Azure 스토리지

---

### Azure 스토리지

: Microsoft 클라우드 데이터 서비스의 핵심

- 3가지 유형의 데이터 유형의 저장소일 뿐만 아니라 대용량 데이터 저장 및 분석처럼 최신 데이터 저장소 시나리오를 지원하는 솔루션

1. 정형 데이터

   : 고정된 칼럼에 저장되거나 정해진 스키마에 의해 구조화

   - RDBMS 테이블, 스프레드 시트

2. 반정형 데이터

   : 스키마에 해당하는 메타데이터가 내부에 존재

   - HTML, XML, JSON, YAML

3. 비정형 데이터

   : 데이터가 그 자체로 존재, 구조화되어 있지 않음

   - 문서, 동영상, 이미지 등과 같은 이진 데이터

### 장점

1. 뛰어난 내구성 및 고가용성
2. 보안성
3. 확장성
4. 원활한 액세스 가능하고 개발의 편리성 제공

### Azure 스토리지 계정

- 표준 범용 v2 : Blob, 파일, 큐, 테이블 및 Data Lake Storage를 비롯한 대부분의 시나리오
- Premium 블록 Blob : 트랜잭션 속도가 높은 블록 Blob 시나리오 또는 더 작은 개체를 사용하거나 일관되게 짧은 스토리지 대기 시간이 필요한 시나리오에 추천
- 프리미엄 파일 공유 : 기업 또는 고성능 파일 공유 애플리케이션
- 프리미엄 페이지 Blob : 프리미엄 고성능 페이지 Blob 시나리오

### Azure 스토리지 서비스

- **Azure 컨테이너(Blob)** : 대규모로 스케일링 가능한 텍스트, 이진 데이터용 저장소. **비구조화된 데이터에 최적화**
- Azure 테이블(Table) : 구조적 비관계형 데이터 저장에 적합
- Azure 큐(Queue) : 애플리케이션 간에 안정적인 메시징을 위한 메시지 저장소
- Azure Files : 클라우드 또는 온-프레미스 배포에 대한 관리형 파일 공유

### 중복 / 복제 옵션

: Azure 스토리지는 하드웨어 오류, 네트워크 중단, 자연 재해 등의 예측 불가능한 상황. 보안 폐지, 업데이트 등과 같은 예정된 작업시 데이터 보호를 위해 여러 개의 복사본을 저장

**[ 단일 영역 ]**

- LBS
  - 복제본 3개, 지역 1개
  - 디스크, 노드, 렉 오류로부터 보호
  - 모든 복제본이 커밋될 때 쓰기가 승인된다.
  - 이중 패리티 RAD보다 우수
- ZRS
  - 복제본 3개, 영역 3개, 지역 1개
  - 디스크, 노드, 렉 및 영역 오류로부터 보호
  - 세 영역 모두에 동기 쓰기

**[ 다중 영역 ]**

- GRS
  - 복제본 6개, 지역 2개(지역당 3개)
  - 주요 지역 재해로부터 보호
  - 보조에 대한 비동기 복사본
- RA-GRS
  - 보조에 대한 GRS + 읽기 액세스
  - 별도의 보조 엔드포인트
  - RPO(복구 지점 목표) 지연을 보조로 쿼리할 수 있음

### 실습 - 스토리지 계정 만들기

![스크린샷 2023-07-17 오전 11.32.01.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a586d717-572e-4030-bcba-0e1c71467beb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.32.01.png)

- `st` → storage의 약어

![스크린샷 2023-07-17 오전 11.35.20.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/23ece416-bca2-45d3-beeb-3217f6c8e183/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.35.20.png)

![스크린샷 2023-07-17 오전 11.37.30.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ed30ff81-15cc-46c6-ab7c-e7199aa14007/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.37.30.png)

![스크린샷 2023-07-17 오전 11.38.13.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a7931fe4-5f43-448c-8d35-442f725f7ccb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.38.13.png)

![스크린샷 2023-07-17 오전 11.38.29.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3d90e890-8be0-4f9d-b3ea-84424a5dce80/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.38.29.png)

### Blob Storage

: 개체 스토리지라고도 하며 구조화되지 않은 데이터를 저장(이진 텍스트, 이진 데이터).

- 브라우저에 직접 이미지 또는 문서 제공
- 분산 액세스용 파일 저장
- 비디오, 오디오, 스트리밍
- 백업 및 복원, 재해복그, 보관용으로 데이터 저장
- 온-프레미스 또는 Azure 호스팅 서비스에 대해 분석하기 위한 데이터 저장

### Blob 컨테이너 만들기

- 모든 Blob은 컨테이너 안에 있어야 한다.
- 계정에는 무제한의 컨테이너가 존재할 수 있다.
- 컨테이너 안에 무제한의 Blob이 존재할 수 있다.
- 개인 Blob - 익명 액세스 없음
- Blob - Blob 익명 읽기 액세스

### Blob 계층 만들기

- 핫 : 스토리지 계정에서 개체에 빈번한 액세스가 있는 경우
- 쿨 : 자주 액세스하지 않으며 30일이상 저장되는 대량의 데이터 저장에 적합
- 보관 : 검색 대기 시간에 몇 시간이 걸려도 괜찮으며, 180이상 저장

### 실습 - 이미지 업로드

![스크린샷 2023-07-17 오전 11.46.19.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b2b6a10a-5680-48a3-ad69-745bd29c352f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.46.19.png)

![스크린샷 2023-07-17 오전 11.46.31.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/de0218e2-14d1-4921-8964-cd9df3f6584a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.46.31.png)

![스크린샷 2023-07-17 오전 11.47.56.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/23044d56-409e-4b39-975a-d58a2ba59e2a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.47.56.png)

![스크린샷 2023-07-17 오전 11.48.33.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/82211b1b-19a6-42a8-b7e8-4f672dd44a4c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%8C%E1%85%A5%E1%86%AB_11.48.33.png)

![스크린샷 2023-07-17 오후 12.02.05.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6018b388-aeb6-4aee-9b87-d33f358d0ff9/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.02.05.png)

![스크린샷 2023-07-17 오후 12.02.17.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a7e27f99-ddf5-4188-a769-2a09cefe4352/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.02.17.png)

<aside>
⛔ **왜 에러가 나올까?**

</aside>

- 우리가 private으로 설정해놨기에 볼 수 없다.

![스크린샷 2023-07-17 오후 12.03.58.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/07fcb178-ff9d-44f9-9582-897bce9faf1b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.03.58.png)

![스크린샷 2023-07-17 오후 12.04.12.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/32c7476a-90f8-449a-8506-3fc9a104b22d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.04.12.png)

⇒ 액세스 수준을 변경하니 보인다.

### 파일 공유

- Azure는 SMB 프로트콜을 사용해 파일 공유 기능을 제공한다.
- 여러 대의 VM이 같은 네트워크 드라이브를 공유하고 파일에 대한 읽기/쓰기 가능
- 로그나 데이터 파일들을 공유해 추후 분석 가능
- 파일 공유는 윈도우, 리눅스, 맥OS에서 연결 가능
- 온-프레미스나 다른 클라우드 VM에서 파일 공유를 사용할 경우 SMB 포트인 TCP 445 열려 있는지 확인 필요

### 실습 - 파일 공유

![스크린샷 2023-07-17 오후 12.11.13.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3649f26f-f5e2-4a62-b43e-b5988b8af293/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.11.13.png)

![스크린샷 2023-07-17 오후 12.11.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/74d30714-61dc-42b1-9f3f-d19dad8f8776/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.11.42.png)

![스크린샷 2023-07-17 오후 12.12.11.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a4e4c8c4-7ba0-4c85-9557-cbacc9a5752c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.12.11.png)

![스크린샷 2023-07-17 오후 12.13.29.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/cdfa179d-23e8-4474-812c-8e58dc8ce76d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.13.29.png)

### 가상 머신

: 운영 체제, 스토리지, 네트워킹 기능 등을 제공

- Azure App Service, Cloud Service 등과 비교하여 보다 강력하게 컴퓨팅 환경 구축 가능 가상 머신은 IaaS
- 필요에 따라 신속하게 스케일 업, 스케일 다운 가능

### 가상머신 생성 구성 요소

- 리소스 그룹
  - 가상 머신을 포함할 기존 리소스 그룹을 선택하거나 새롭게 생성
- 가상 머신 이름
  - 보통 vm을 붙여서 이름설정.
  - Windows VM의 경우 최대 15자
  - Linux VM 경우 최대 64자
  - 가상머신에서 수행하는 작업, 지역을 쉽게 식별할 수 있도록 의미있고 일관성있게 정의.
    ex) webvm-korean
- 지역(위치) 및 비용
  - 가상 머신을 만들고 배포할 지역 설정
  - 배포 위치에 따라 법적 제한 사항, 규정 준수, 세금 관련 부분이 차이가 존재할 수 있으므로 이를 고려하며 설정이 필요
  - 지역에 따라서 사용 가능한 옵션에 제공하지 않은 경우도 있고, 가격 차이 존재
  - 가상 머신에 부과되는 비용은 시간당 가격으로 책정되지만 실제로는 분당 요금으로 청구되는 컴퓨팅 비용과 VM에서 사용하는 스토리지에 부과되는 비용으로 구성
- 가용성 옵션
  - 가용성은 가상머신이 정상적으로 사용 가능한 정도
  - 예상치 못한 문제 발생에 대한 대비로 가용성 영역, 가상머신 확장집합, 가용성 집합을 설정하는 옵션으로 기본값은 인프라 중복안함
- 이미지(운영체제)
  - 가상머신을 만들 때 사용하는 운영체제 이미지
    ex) Windows, Linux
- 크기(가상머신 크기)
  - Azure는 처리 능력, 메모리, 스토리지 용량을 독립적으로 지정하는 대신, 해당 요소들에 대한 다양한 VM 크기를 제공
  - 적절한 VM 크기를 결정하는 기준은 VM에서 실행하는 워크로드의 유형을 따른다
- 디스크
  - 가상머신에 운영체제를 설치하고 응용 프로그램을 실행하기 위해 운영체제를 위한 디스크와 임시 디스크 필요. 프리미엄 SSD, 표준 SSD
  - 사용자가 보관해야 할 필요가 있는 데이터를 저장하기 위한 데이터 디스크
  - 가상 머신에서 사용하는 모든 디스크는 모든 고정 크기의 VHD
- 네트워킹
  - 기존 가상 네트워크 선택 및 새로운 가상 네트워크 추가
  - 기존 서브넷 선택ㄱ 및 새로운 서브넷 구성
  - 기존 공용 IP 선택 및 새로운 공용 IP 생성
  - NIC 생성

### 실습 - 가상머신 생성 (Windows)

![스크린샷 2023-07-17 오후 12.31.14.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3df710bb-608f-43bd-8434-5c04bff35f60/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.31.14.png)

![스크린샷 2023-07-17 오후 12.37.06.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d1690e2f-1a22-442b-ad79-2a8a2302ee6c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.37.06.png)

![스크린샷 2023-07-17 오후 12.37.03.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/29a3f6d0-02f1-4198-b5cb-60b1adabdb7e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.37.03.png)

![스크린샷 2023-07-17 오후 12.37.59.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6745f9b5-8a64-4d10-bf49-0c138afadb13/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.37.59.png)

![스크린샷 2023-07-17 오후 12.39.15.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/baff5e65-7b10-40a4-9c80-18efb35763e1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.39.15.png)

![스크린샷 2023-07-17 오후 12.40.04.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1e6d4912-2196-48e2-b55e-14eb028a98ba/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.40.04.png)

![스크린샷 2023-07-17 오후 12.40.43.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/40d8691d-17a0-43a9-938f-a9a491035b3c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.40.43.png)

![스크린샷 2023-07-17 오후 12.40.56.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/769d4871-b04c-46f9-8119-1a1a9b8649d2/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.40.56.png)

![스크린샷 2023-07-17 오후 12.47.51.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2ea37f90-1f7f-483c-96cf-ec1ab05ab49e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_12.47.51.png)

![스크린샷 2023-07-17 오후 2.05.28.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/df139e1c-669d-4b3d-8c7f-4f4dcce1d0ab/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.05.28.png)

![스크린샷 2023-07-17 오후 2.05.44.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/616c8f05-dcfe-4e23-a02c-62984c77c655/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.05.44.png)

[맥에서 Windows 10 원격 데스크톱 접속하는 방법](https://www.lainyzine.com/ko/article/how-to-access-windows-10-remote-desktop-from-mac/)

![스크린샷 2023-07-17 오후 2.11.12.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b2a9be70-cd7a-44f8-8010-d2005ae83777/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.11.12.png)

![스크린샷 2023-07-17 오후 2.13.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/18681421-133f-48bf-bd3d-a302c70b3b93/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.13.42.png)

![스크린샷 2023-07-17 오후 2.16.33.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/be113303-09c2-473b-8d4f-b7ff8471fa85/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.16.33.png)

![스크린샷 2023-07-17 오후 2.16.50.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/346fc950-8a0f-4e00-a069-be23fa257470/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.16.50.png)

![스크린샷 2023-07-17 오후 2.19.35.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d5d72469-4624-42f0-9da3-7aa37c6999cd/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.19.35.png)

![스크린샷 2023-07-17 오후 2.20.37.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/503d289c-738b-477c-8034-320a4c65725d/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.20.37.png)

![스크린샷 2023-07-17 오후 2.20.59.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/4ba42827-59cf-453d-8116-eb8c98dd52cf/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.20.59.png)

![스크린샷 2023-07-17 오후 2.21.29.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/df3cce76-eadf-4ebc-b9c9-08afd864805e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.21.29.png)

![스크린샷 2023-07-17 오후 2.23.56.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c4880b19-d8c2-43b2-9be1-5e599927b33f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.23.56.png)

![스크린샷 2023-07-17 오후 2.25.09.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6fd53fcc-4ea5-49d1-b890-ea362433b716/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.25.09.png)

![스크린샷 2023-07-17 오후 2.26.26.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5f7b3bf1-e312-40f1-9186-427cbde83245/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.26.26.png)

![스크린샷 2023-07-17 오후 2.27.04.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1a251840-c3d1-468e-878b-e8022e43e5a6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.27.04.png)

<aside>
💡 **가상머신에 저장한 log.txt가 스토리지에 들어와있다! ↔ 반대도 가능**

</aside>

### 실습 - 가상머신 지우기

- 계속 사용해야 하는데 당장은 사용하지 않는다면 → `중지`
  ⇒ 가상머신 비용 절감

![스크린샷 2023-07-17 오후 2.34.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/123e9aa4-c768-4cad-8488-75423cfd9ea8/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.34.42.png)

- 리소스 그룹 삭제 : `az group delete --name {리소스그룹명} --no-wait --yes`
  - `--no-wait --yes` : 여러 개 있어도 상관쓰지말고 그냥 지워라

### 실습 - 가상머신 생성 (Linux)

![스크린샷 2023-07-17 오후 2.45.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c4d8dc25-8cb7-4987-b80d-b85548f5a344/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.45.42.png)

![스크린샷 2023-07-17 오후 2.46.15.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6d469cbb-7834-4fb1-a236-975946594d05/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.46.15.png)

- 인바운드 : 들어오는 것. PC에서 가상머신을 연결할 때 어떤 포트를 선택할거냐

![스크린샷 2023-07-17 오후 2.47.06.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/885e2e1d-04a9-485e-988e-934c0a08e0c3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.47.06.png)

![스크린샷 2023-07-17 오후 2.47.45.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/aa2048bf-7cf4-48e2-8af4-ea3d666b9414/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_2.47.45.png)

- Azure Load Balancer && 애플리케이션 게이트웨이 : 엄청난 비용 소모. 비싼 자원

![스크린샷 2023-07-17 오후 3.02.20.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/a7bc325c-644f-4129-bd0f-b05bd1b55008/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.02.20.png)

![스크린샷 2023-07-17 오후 3.02.49.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/51ad923e-ed61-4934-9f61-78e528793323/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.02.49.png)

- 키가 다운로드 된다.

![스크린샷 2023-07-17 오후 3.03.35.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/0afea83a-f36b-43d2-b6a2-801ea77e6389/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.03.35.png)

![스크린샷 2023-07-17 오후 3.04.21.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/1fa0652f-913f-4891-832a-985e99830e6c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.04.21.png)

![스크린샷 2023-07-17 오후 3.04.28.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bc7ded49-28f8-4bac-afdd-894980bc167e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.04.28.png)

- Permission Denied 오류가 떴다.

[SSH: Permission denied (publickey). - Microsoft Q&A](<https://learn.microsoft.com/en-us/answers/questions/1115347/ssh-permission-denied-(publickey)>)

![스크린샷 2023-07-17 오후 3.29.09.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/fc0cb144-ea00-48ae-9a32-018e8bdb90bd/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.29.09.png)

![스크린샷 2023-07-17 오후 3.26.16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/20af7025-af02-48eb-854e-314d3c4d99c6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.26.16.png)

![스크린샷 2023-07-17 오후 3.30.48.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ddb5db5b-4df7-4044-88b3-f9c036002b20/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.30.48.png)

![스크린샷 2023-07-17 오후 3.32.41.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/5cca64c2-dccb-43d2-a0dd-ce764706093a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.32.41.png)

![스크린샷 2023-07-17 오후 3.34.42.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/2ba62f3d-e8b2-4bc5-932b-5233d9284a08/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_3.34.42.png)

- abc.txt가 보인다.

### 가상 머신 크기 조정

- 이미 배포된 가상머신의 CPU, 메모리, 표준 SSD에서 프리미엄 SSD로 변경, 데이터 디스크 추가
- **가상 머신을 중단하고 해야함!**

### Azure PowerShell을 이용한 리소스, 리소스 그룹 생성

![스크린샷 2023-07-17 오후 4.01.12.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/6cb0aa6c-7704-4b04-89e7-243bd5ed8d98/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.01.12.png)

![스크린샷 2023-07-17 오후 4.01.47.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/354346f5-c548-4482-97b6-b47f8fb4bf3c/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.01.47.png)

1. `New-AzResourceGroup` 명령을 이용한 리소스 그룹 생성
2. `New-AzDisk` 명령을 이용한 Disk 생성

   ![스크린샷 2023-07-17 오후 4.10.46.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eb5e8462-48b9-43ec-85a9-59bcf952a8b1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.10.46.png)

   ![스크린샷 2023-07-17 오후 4.11.01.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/030fbe10-36c4-4f23-96b7-9c3059628d43/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.11.01.png)

## ARM Template

---

### ARM Template

: 인프라를 정의하는 개념인 IaC(Infra as Code)의 한 형태

- Azure Portal에서 VM, Storage를 생성하기 위해 클릭할 필요 없이 **key-value 쌍으로 이루어진 JSON 형태**의 ARM template을 이용.
- 리소스를 정의하고 Azure Resource Manager가 생성하도록 한다.

### 선택해야 하는 이유?

1. 선언적 구문 사용과 일관되고 반복적인 배포 가능
2. CI/CD 통합
3. 오케스트레이션

### 기본 구조

- 키(key) - 값(value) 쌍의 컬렉션
- 각 키(key)는 문자열
- 각 값(value)은 문자열, 숫자, 부울 값, 값 목록, 개체

### 매개변수

- 리소스를 배포할 때 입력할 수 있는 값을 지정
- adminUsername, adminPassword 매개 변수를 정의한 예
- metadata는 매개변수에 대한 설명
- securestring은 모든 암호과 비밀데이터에 사용
  - 리소스 배포 후에 읽을 수 없다.

### 변수

- 복잡한 식을 반복하는 대신 복잡한 식을 포함하는 변수를 저으이
  ⇒ “`variables`”
  - 템플릿을 단순화함
- 데이터 형식 지정 안함
- 매개변수 또는 다른 변수값 사용
- 변수 사용
  - **variables(variablename) 함수**

### 함수

- 템플릿 기본 함수와 사용자 정의 함수
- 함수 호출 형식
  ⇒ `functionname(arg1, arg2, …)`
- 함수에서 반환된 개체의 속성
  ⇒ `functioname().property`

### 실습

![스크린샷 2023-07-17 오후 4.31.37.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b930626a-9777-4199-acff-d66fb6df2400/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.31.37.png)

![스크린샷 2023-07-17 오후 4.35.55.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/d82081cc-12d9-4c8c-a7d8-ceae5059a9c1/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.35.55.png)

![스크린샷 2023-07-17 오후 4.37.54.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b1002bca-28d2-492c-ae5d-4e30212f9f20/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.37.54.png)

![스크린샷 2023-07-17 오후 4.36.22.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b0474fa6-d942-4024-976d-5620f2aaf098/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.36.22.png)

- 템플릿 편집 → Source Resource ID, HyperVgeneration 삭제
- 매개변수 편집 → diskName 이름 바꾸기

![스크린샷 2023-07-17 오후 4.42.07.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/486d595a-af3c-4185-9265-a79aa55ba6fa/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.42.07.png)

![스크린샷 2023-07-17 오후 4.42.59.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bf042830-583f-432f-87a7-3d4a088ae517/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.42.59.png)

### 다 삭제하자

![스크린샷 2023-07-17 오후 5.00.26.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/477414de-9593-44ce-8dab-c2e40e2e496f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.00.26.png)

![스크린샷 2023-07-17 오후 5.00.58.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/be54876c-ba6c-4625-8a1c-c59c42a18fd6/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.00.58.png)

![스크린샷 2023-07-17 오후 5.04.09.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/c4b9d7bd-7ea3-4d66-8340-0d5ffa0a4a15/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.04.09.png)

![스크린샷 2023-07-17 오후 5.05.05.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ecf0ee00-6308-4e92-a1e5-a344a3b9d3eb/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.05.05.png)

- vault → 백업용

## 가상 머신 가용성

---

### 가상 머신 가용성

: 가동률과 비슷한 개념

- 정상적인 가동시간(uptime)을 전체 가동시간(uptime + downtime)으로 나눈 값
- 가상 머신의 가용성은 계획되지 않은 하드웨어 유지관리, 계획된 유지관리, 예측하지 못한 다운타임에 의해 영향을 받음
- 가상 머신의 중복성 구현에 가용성 집합 사용
- 가용성 영역이나 가용성 집합과 부하분산 장치를 결합

### 가용성 집합

: 하나의 데이터센터에서 가상 머신의 중복성과 가용성을 제공하는 서비스

- 가용성 집합에 포함된 가상 머신들을 각각 업데이트 도메인, 장애 도메인에 할당
- 각 가용성 집합은 최대 3개의 장애 도메인과 20개의 업데이트 도메인으로 구성 가능

### 업데이트 및 장애 도메인

- 업데이트 도메인 : Azure가 배포 전체에서 증분 또는 롤링 업그레이드를 수행할 수 있다.
- 장애 도메인 : 단일 실패 지점을 공유하는 공통 하드웨어 집합인 스위치를 공유하는 가상머신 그룹

### 수직과 수평 크기 비교

- 수직 스케일링 : 워크로드의 단일 인스턴스. 전력을 늘리거나 줄이는 프로세스. 대부분 수동으로 수행
- 수평 스케일링 : 워크로드의 인스턴스 수를 늘리거나 줄이는 프로세스. 대부분 자동으로 수행

### 실습 - 가용성 집합 구현

1. Azure Portal 로그인
2. Azure Portal에서 ‘Korea Central’, ‘East US’ 등의 지역에 가상 네트워크와 서브넷 생성
3. 생성된 서브넷에 2개의 VM을 가용성 집합으로 배포

## ✏️ 복습 TIME

---

> 윈도우 10 가상 머신 만들고, 하드디스크 32GB 추가, 공유 폴더 만들어 이미지를 공유해 하드디스크가 볼 수 있도록

![스크린샷 2023-07-17 오후 5.28.16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/e3147191-bc58-440d-935f-98ad6c195c9a/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.28.16.png)

![스크린샷 2023-07-17 오후 5.25.59.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/df8dc2d7-0d49-496d-bb7d-12bb9e794ad5/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-07-17_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_5.25.59.png)

<aside>
🤗 **성공!**

</aside>
